# Тестовое задание на должность Node.js разработчика в компанию АЙТИ-АКАДЕМИЯ

Тестовое задание на Back end: 
 
Необходимо реализовать сервис с API для записи человека на прием к врачу, и напоминанием за  1 день до приема и за 1,5 часа до приема.  
Оповещение должно содержать: 
ФИО доктора, дату (в формате dd.mm.yyyy), время приёма (в формате hh:mm), адрес клиники 
 
В качестве решения тестового задания ожидаем получить ссылку на github с кодом и ссылку на API при помощи которой мы сможем протестировать работоспособность в Postman

## Сервер развернут [здесь](https://it-academy.onrender.com)

## Технололгии

### Backend
* [NodeJS](https://nodejs.org/)
* [ExpressJS](https://expressjs.com/)
* [Mongoose](https://mongoosejs.com/)


## Описание
1. Для записи на прием необходимо предварительно зарегистрировать пользователя. Endpoint ```/auth/register``` ожидает POST запрос с телом:

```
{
    "name": "Анатолий",
    "middlename": "Борисович",
    "surname": "Боронилов",
    "email": "boronilov@gmail.com",
    "password": "secret"
}
```

Если не заполнено хотя бы одно из полей, введен некорректный email или подобный аккуаунт уже есть - отработает валидация

```Please provide the valid email```

```name, middlename, surname, email, password must be provided```

```User with email aboronilov@gmail.com already exists```

2. После этого пользователя нужно залогинить. Endpoint ```/auth/login``` ожидает POST запрос с телом:

```
{
    "email": "boronilov@gmail.com",
    "password": "secret"
}
```

Если все в порядке и вернуся 200 код, значит в cookies добавился токен и мы авторизованы.

Если предоставлены неверные credentials, отработает валидация
```Wrong email or password```

3. Опционально реализован механизм удаления или изменения пользователя - доступно только для владельца аккаунта (чужие удалять/изменять нельзя). Изменение и удаление endpoint ```/api/users/{id}``` PATCH и DELETE запросы соотвественно

PATCH ожидает тело:

```
{
    "name": "test",
    "middlename": "test",
    "surname": "test"
}
```
Иначе отработает валидация

4. Опционально реализован просмотр всех пользователей - доступен только авторизованным пользователям. Endpoint ```/api/users``` GET запрос

4. Перечень врачей можно посмотреть на endpoint ```/api/doctors``` GET запрос. Конкретного врача - ```/api/doctors/{id}``` GET запрос

5. Для записи на прием необходимо отправить POST запрос на endpoint ```/api/appointments```. Тело запроса:

```
{
    "start":"2023-03-24 17:30",
    "doctorId": "641da6d1e195cb84df94e769",
    "patientId": "641da734e195cb84df94e76c",
    "reason": "Головные боли"
}
```

Валидации отработают если:
   - отсутсвует хотя бы одно из полей
   - если время начала сеанса не соответсвует формату ```yyyy-mm-dd hh:mm```
   - если время начала раньше, чем текущее время
   - если у текущего пользователя на это время уже есть запись
   - если у выбранного доктора уже есть на это время запись
   - если вы не авторизованы
   - если вы пытаетесь записать другого пациента

6. В случае успешной записи в условленное время выводятся оповещния

![reminder](https://github.com/aboronilov/it-acadymy-test-task/blob/main/public/reminder.JPG)

7. Авторизованные пользователи могут посмотреть список назначений GET запросом на endpoint ```/api/appointments```

8. Авторизованный пользователь, которому назначен прием, может посмотреть свое назначение GET запросом на endpoint ```/api/appointments/{id}```





